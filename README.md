# 💎 Campus Help - 校園共享幫幫平台 

**有空幫一下，校園時間銀行**

---

## 📖 專案簡介

Campus Help 是一個專為校園設計的**時間銀行互助平台**，透過 AI 智慧媒合技術，讓學生能夠互相幫助、技能共享。

---

## ✨ 功能特色

### 核心功能

#### 1. 🎯 智慧使用者系統
- 下拉選單快速切換使用者（展示用）
- 即時顯示個人資訊、點數、評分
- 技能標籤視覺化

#### 2. 📋 任務管理
- **任務列表**: 卡片式展示，支援搜尋與篩選
- **發布任務**: 直覺表單，AI 輔助優化描述
- **我的任務**: 分頁顯示發布的/申請的任務
- **任務申請**: 一鍵申請，即時更新狀態

#### 3. 🤖 AI 智慧媒合
- **多因子加權模型**: 技能(40%) + 時間(20%) + 評價(20%) + 地點(20%)
- **視覺化展示**: Plotly 圓餅圖顯示媒合分數
- **推薦理由**: 自動生成推薦理由
- **Top 5 推薦**: 按媒合分數排序

#### 4. 🛡️ AI 安全機制
- **風險審查**: Gemini 自動檢測違規內容
- **描述優化**: AI 改善模糊的任務描述
- **關鍵字過濾**: 快速篩選禁止內容

---

## 🚀 快速開始

### 前置需求

- Python 3.9 或更高版本
- pip (Python 套件管理器)
- (可選) Google Gemini API Key

### 安裝步驟

#### 1. 下載專案

```bash
# 假設您已經下載並解壓縮
cd campus-help-streamlit
```

#### 2. 安裝依賴

```bash
pip install -r requirements.txt
```

這會安裝：
- streamlit (Web 框架)
- sqlalchemy (資料庫)
- pandas (資料處理)
- plotly (視覺化)
- google-generativeai (AI 功能)
- python-dotenv (環境變數)

#### 3. 設定環境變數 (可選)

```bash
# 編輯 .env 檔案，填入 Gemini API Key
notepad .env
```

**取得 Gemini API Key**:
1. 訪問 https://makersuite.google.com/app/apikey
2. 使用 Google 帳號登入
3. 點擊 "Create API Key"
4. 複製 API Key 貼到 .env 檔案

**注意**: 如果不設定 API Key，AI 功能會使用模擬模式，仍可正常展示！

#### 4. 初始化資料庫

```bash
python init_db.py
```

這會：
- 建立 SQLite 資料庫
- 建立 4 個測試使用者
- 建立 6 個測試任務

#### 5. 啟動應用

```bash
streamlit run app.py
```

瀏覽器會自動開啟 `http://localhost:8501`

🎉 **完成！** 現在您可以開始使用 Campus Help 了！

---
# 🎉 Campus Help 增強版

## 📦 新增功能

### ✅ 1. 任務狀態管理
- **接受申請**: 發起者可以從申請者中選擇一位，任務進入「進行中」狀態
- **完成任務**: 雙方都可以標記任務完成，自動轉移點數
- **狀態追蹤**: 任務狀態（開放 → 進行中 → 已完成）完整呈現

### ✅ 2. 點數轉換邏輯
- **發布任務扣點**: 發布時自動扣除發起者的點數
- **完成任務加點**: 任務完成後自動將點數轉給幫助者
- **點數不足警告**: 發布時會檢查點數是否足夠

### ✅ 3. 評價系統
- **雙向互評**: 任務完成後雙方可以互相評分（1-5星）
- **評價展示**: 新增「我的評價」頁面顯示收到的所有評價
- **自動更新**: 評分會自動更新使用者的平均評分和信任值

---

## 🧪 測試新功能

### 測試 1: 發布任務 → 接受申請 → 完成任務

1. **切換到「王小美」**（200點）
2. 點擊「發布任務」
3. 填寫表單，設定 50 點
4. 發布後，檢查側邊欄點數是否變成 **150 點** ✅

5. **切換到「李大明」**
6. 到「首頁」申請剛才的任務
7. 切換回「王小美」
8. 到「我的任務」→「我發布的」
9. 找到任務，點擊展開
10. 看到申請者「李大明」，點擊 **「✅ 接受」** ✅

11. 切換到「李大明」
12. 到「我的任務」→「我接的」
13. 找到被接受的任務，點擊 **「✅ 確認完成」** ✅
14. 檢查側邊欄點數是否變成 **400 點**（350 + 50）✅

### 測試 2: 互相評價

15. 繼續上面的情境
16. 在「我接的」分頁中，往下滾動
17. 看到「⭐ 評價發布者」區塊
18. 選擇評分（例如 5.0）
19. 填寫評價內容（選填）
20. 點擊 **「提交評價」** ✅

21. 切換到「王小美」
22. 到「我的任務」→「我發布的」
23. 找到已完成的任務
24. 評價「李大明」✅

25. 切換到「李大明」
26. 點擊側邊欄的 **「⭐ 我的評價」**
27. 看到剛才「王小美」給的評價 ✅

### 測試 3: 點數不足警告

28. 切換到「陳小華」（150點）
29. 點擊「發布任務」
30. 設定點數為 **200 點**（超過現有點數）
31. 看到紅色警告：❌ 點數不足 ✅
32. 點擊發布會失敗 ✅

---

## 📊 功能對照表

| 功能 | 原版 | 增強版 |
|------|------|--------|
| 發布任務 | ✅ | ✅ |
| 申請任務 | ✅ | ✅ |
| 接受申請 | ❌ | ✅ **新增** |
| 完成任務 | ❌ | ✅ **新增** |
| 點數扣除 | ❌ | ✅ **新增** |
| 點數轉移 | ❌ | ✅ **新增** |
| 雙向評價 | ❌ | ✅ **新增** |
| 評價展示 | ❌ | ✅ **新增** |
| 信任值更新 | ❌ | ✅ **新增** |

---

## 🎯 展示重點

黑客松展示時，可以強調的新功能：

### 亮點 1: 完整的任務生命週期
```
發布(-50點) → 申請 → 接受 → 進行中 → 完成(+50點) → 互評 → 信任值提升
```

### 亮點 2: 真實的點數經濟系統
- 點數會真的流動
- 發布任務需要「付出」
- 完成任務獲得「報酬」
- 形成真實的校園經濟體系

### 亮點 3: 信任機制閉環
- 評價 → 平均評分 → 信任值 → 媒合分數
- 完整的信任建立機制
- 鼓勵優質服務

---

## 📝 展示腳本修正

原本的 5 分鐘展示腳本可以加強：

### 2.5 分鐘 Live Demo 部分
```
1️⃣ 瀏覽任務（30秒）
2️⃣ 發布任務 - 展示點數扣除（30秒）
3️⃣ AI 推薦（30秒）
4️⃣ 【新增】接受申請 - 展示狀態變更（20秒）
5️⃣ 【新增】完成任務 - 展示點數轉移（20秒）
6️⃣ 【新增】互相評價 - 展示信任值更新（20秒）
```
---

# 🛡️ Campus Help 安全機制視覺化 - 完整說明

## 📋 功能概述

根據組員建議，我們新增了全方位的**安全機制視覺化系統**，用盾牌圖示（🛡️）和安全徽章來強化「安全」「信任」的視覺印象，完美呼應企劃書中的「三層安全防護」！

---

## ✨ 新增的 5 大安全視覺化功能

### 1️⃣ 身份驗證徽章

**位置**：側邊欄使用者資訊區

**視覺效果**：
```
┌────────────────────────────┐
│   🛡️ 身份已驗證            │
│   東吳大學學校信箱認證      │
└────────────────────────────┘
```

**特色**：
- 漸層紫色背景
- 清楚標示「已驗證」狀態
- 說明驗證方式（學校信箱）

**展示價值**：
- 呼應企劃書的「學校信箱認證」
- 建立信任感
- 視覺化身份保障

---

### 2️⃣ 任務安全審查標記

**位置**：
- 首頁任務卡片
- 發布任務頁面

**視覺效果**：

**在首頁**：
```
任務標題
[日常支援] [外雙溪校區] [🛡️ 已審查] [🔥 急件]
```

**在發布頁面**：
```
🛡️ 安全保障：所有任務將經過 AI 自動審查，確保平台安全
```

**風險等級顯示**：
發布任務時會顯示 AI 審查結果：

- 🛡️ **安全**（綠色）- 風險等級：低
- ⚠️ **中等風險**（橘色）- 風險等級：中
- 🚨 **高風險**（紅色）- 風險等級：高
- ❌ **嚴重違規**（紅色）- 自動拒絕

**展示價值**：
- 視覺化 AI 風險審查機制
- 讓使用者看到安全防護在運作
- 透明的風險評估

---

### 3️⃣ 發布者身份認證標記

**位置**：任務卡片的發布者名稱旁

**視覺效果**：
```
👤 發布者：王小美 🛡️
```

**展示價值**：
- 快速識別已驗證使用者
- 增強發布者可信度
- 視覺化身份保障

---

### 4️⃣ AI 推薦安全保障

**位置**：AI 推薦頁面

**視覺效果**：

**頁面標題下**：
```
🛡️ 安全保障：所有推薦任務已通過多重安全審查
```

**每個推薦任務中**：
```
🛡️ 安全任務：已通過 AI 風險審查
```

**申請成功後**：
```
✅ 申請成功！
🛡️ 交易保護已啟動
```

**展示價值**：
- 強調 AI 推薦的安全性
- 讓使用者安心申請
- 展示多重防護機制

---

### 5️⃣ 點數交易安全保護

**位置**：
- 任務完成時
- 我的任務頁面

**視覺效果**：

**完成任務時**：
```
✅ 任務已完成！李大明 獲得 50 點
🛡️ 點數轉移安全完成
```

**已完成任務顯示**：
```
🛡️ 點數交易已完成，安全無虞
```

**發布任務成功**：
```
✅ 任務發布成功！
💰 已扣除 50 點 | 🛡️ 交易安全保護已啟用
```

**展示價值**：
- 視覺化點數交易安全性
- 讓使用者對交易有信心
- 強調平台的保護機制

---

## 🎨 視覺設計細節

### 配色方案

**安全徽章（綠色系）**：
```css
background: linear-gradient(135deg, #10b981 0%, #059669 100%);
色彩心理：綠色代表安全、通過、可信賴
```

**身份驗證（紫色系）**：
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
色彩心理：紫色代表尊貴、專業、信任
```

**風險警示（橘色/紅色）**：
```css
中等風險：#f59e0b（橘色）
高風險：#ef4444（紅色）
色彩心理：警示、注意、危險
```

### 圖示系統

- 🛡️ - 主要安全標記（盾牌）
- ✅ - 通過、成功
- ⚠️ - 警告、中等風險
- 🚨 - 高風險
- ❌ - 拒絕、嚴重違規
- 💰 - 點數、交易
- 🔒 - 加密、保護

---

## 📊 功能對照表

| 功能 | 位置 | 圖示 | 用途 |
|------|------|------|------|
| 身份驗證 | 側邊欄 | 🛡️ | 顯示已驗證狀態 |
| 任務審查 | 任務卡片 | 🛡️ | 標示已通過審查 |
| 發布者認證 | 發布者名稱旁 | 🛡️ | 確認身份真實 |
| 風險評估 | 發布任務頁 | 🛡️/⚠️/🚨 | 顯示風險等級 |
| 交易保護 | 完成任務時 | 🛡️ | 點數安全保障 |
| AI 推薦安全 | AI 推薦頁 | 🛡️ | 推薦任務可信 |

---

## 🎯 展示重點

### 呼應企劃書的「三層安全防護」

#### 第一層：AI 自動過濾 ✅
**視覺化呈現**：
- 發布任務時顯示「🛡️ 正在進行 AI 安全審查...」
- 審查結果顯示風險等級
- 任務卡片標示「🛡️ 已審查」

#### 第二層：身份驗證 ✅
**視覺化呈現**：
- 側邊欄「🛡️ 身份已驗證」徽章
- 所有使用者名稱旁顯示 🛡️
- 強調學校信箱認證

#### 第三層：交易保護 ✅
**視覺化呈現**：
- 點數交易時顯示「🛡️ 交易安全保護已啟用」
- 完成後顯示「🛡️ 點數轉移安全完成」

---

### 側邊欄
- [ ] 登入後顯示「🛡️ 身份已驗證」徽章
- [ ] 徽章有漸層紫色背景
- [ ] 顯示「東吳大學學校信箱認證」文字

### 首頁任務列表
- [ ] 每個任務顯示「🛡️ 已審查」徽章
- [ ] 發布者名稱旁有 🛡️ 圖示
- [ ] 頁面頂部顯示「所有任務已通過安全審查」

### 發布任務頁面
- [ ] 顯示安全保障提示
- [ ] AI 審查時顯示進度訊息
- [ ] 審查結果顯示風險等級（彩色徽章）
- [ ] 發布成功顯示「交易安全保護已啟用」

### AI 推薦頁面
- [ ] 頁面標題下顯示安全保障提示
- [ ] 每個推薦任務顯示「🛡️ 安全任務」
- [ ] 申請成功顯示「交易保護已啟動」

### 我的任務頁面
- [ ] 任務標題旁顯示 🛡️
- [ ] 申請者名稱旁顯示 🛡️
- [ ] 完成任務後顯示「點數交易已完成，安全無虞」

---

## 🎤 展示腳本調整

### 修改後的 5 分鐘展示流程

#### 2.5 分鐘 Live Demo：

**1️⃣ 瀏覽任務（30秒）**
- 指出任務卡片上的「🛡️ 已審查」標記
- **說明**："所有任務都經過 AI 自動審查，確保平台安全"

**2️⃣ 發布任務（40秒）**
- 展示安全保障提示
- **重點展示風險審查過程**：
  - "正在進行 AI 安全審查..."
  - 顯示風險等級（綠色 🛡️ 安全）
- 發布成功後指出「🛡️ 交易安全保護已啟用」
- **說明**："這是我們的 AI 風險審查機制，自動過濾違規內容"

**3️⃣ 查看身份驗證（20秒）**
- 切換到側邊欄
- 指出「🛡️ 身份已驗證」徽章
- **說明**："所有使用者都通過學校信箱驗證，確保身份真實"

**4️⃣ AI 推薦（30秒）**
- 展示媒合分數
- 指出「🛡️ 安全任務」標記
- **說明**："AI 推薦的任務都經過多重安全審查"

**5️⃣ 完成任務（30秒）**
- 展示點數轉移
- 指出「🛡️ 點數轉移安全完成」
- **說明**："點數交易有完整的安全保護機制"

### 強調重點

在展示時反覆提到：
1. **"看到這個盾牌 🛡️ 就代表安全保障"**
2. **"三層防護：AI 審查 + 身份驗證 + 交易保護"**
3. **"讓校園互助不只方便，更要安全"**

---

## 💡 回答評審問題的準備

### Q: 如何確保平台安全？
**A**: 我們有完整的三層防護（指著畫面上的 🛡️）：
1. AI 自動審查：Gemini 偵測違規內容
2. 身份驗證：學校信箱認證
3. 交易保護：點數轉移安全機制

您可以看到畫面上到處都有盾牌圖示 🛡️，代表這些功能都在運作。

### Q: 如果有人發布違規任務怎麼辦？
**A**: （展示發布任務頁面）當使用者發布任務時，AI 會立即進行風險審查，如果偵測到違規內容（如代考、借錢），會顯示紅色警示並自動拒絕。您可以看到這裡（指著風險等級顯示）。

### Q: 使用者如何知道任務是安全的？
**A**: 每個任務旁都有「🛡️ 已審查」標記，讓使用者一眼就知道這個任務經過安全檢查。我們用視覺化的方式建立信任感。

---

✅ **全方位的安全視覺化**
- 盾牌圖示隨處可見
- 風險等級彩色顯示
- 安全提示清楚明瞭

✅ **完美呼應企劃書**
- 三層安全防護可視化
- 身份驗證清楚展示
- 風險機制透明呈現

✅ **提升展示效果**
- 視覺衝擊力強
- 安全感滿滿
- 評審印象深刻


## 📊 展示重點

### 技術亮點
- ✨ **純 Python 全棧** - 降低開發複雜度
- 🤖 **AI 智慧媒合** - Google Gemini 2.0 Flash
- 📊 **視覺化展示** - Plotly 互動圖表
- 🎯 **多因子加權模型** - 可解釋的演算法

---

## 🗂️ 專案結構

```
campus-help-streamlit/
├── app.py                    # 主程式 (Streamlit UI)
├── database.py               # 資料庫模型與操作
├── matching_engine.py        # 智慧媒合引擎
├── ai_service.py            # Gemini AI 服務
├── config.py                # 配置檔案
├── init_db.py               # 資料庫初始化腳本
├── requirements.txt         # 依賴套件
├── .env.example             # 環境變數範本
├── .env                     # 環境變數 (自行建立)
├── campus_help.db           # SQLite 資料庫 (自動生成)
└── README.md                # 本文件
```

**總共只有 8 個檔案！** 非常容易維護！

---

## 🧪 測試資料

### 測試使用者

| 姓名 | 科系 | 校區 | 技能 | 點數 |
|------|------|------|------|------|
| 王小美 | 資訊管理學系 | 外雙溪 | 攝影、影片剪輯、設計 | 200 |
| 李大明 | 企業管理學系 | 城中 | 搬運、修理電腦 | 350 |
| 陳小華 | 英文學系 | 外雙溪 | 英文教學、簡報 | 150 |
| 張志明 | 數學系 | 外雙溪 | 數學教學、程式設計 | 500 |

### 測試任務

1. 幫忙搬宿舍行李 (50點)
2. 協助活動攝影 (80點)
3. 教微積分解題 (60點)
4. 幫忙修電腦 (70點)
5. 代購午餐 (30點)
6. 英文簡報修改 (100點)

---

## 🎨 功能演示

### 首頁 - 任務列表
- 搜尋框：輸入關鍵字快速找任務
- 篩選器：按分類、校區篩選
- 任務卡片：顯示標題、描述、點數、徽章
- 申請按鈕：一鍵申請任務

### 發布任務
- 簡潔表單：標題、描述、分類、地點、校區、點數
- AI 優化：點擊按鈕優化任務描述
- 風險審查：自動檢測違規內容
- 即時回饋：發布成功後自動返回首頁

### 我的任務
- 分頁顯示：我發布的 / 我接的
- 狀態追蹤：待媒合、進行中、已完成
- 申請者列表：查看誰申請了我的任務

### AI 推薦
- Top 5 推薦：按媒合分數排序
- 圓餅圖：視覺化四維度分數
- 推薦理由：說明為什麼推薦
- 一鍵申請：直接申請推薦任務

---

## 🛠️ 技術架構

### 技術棧
```
Streamlit 1.39          - Web 框架
SQLAlchemy 2.0          - ORM
Pandas 2.2              - 資料處理
Plotly 5.24             - 視覺化
Google Gemini 2.0 Flash - AI 引擎
```

### 系統架構
```
┌─────────────────────────────────┐
│      Streamlit (UI Layer)       │
├─────────────────────────────────┤
│    app.py (主程式)              │
│    - 頁面路由                    │
│    - 使用者互動                  │
│    - 資料展示                    │
└────────┬────────────────────────┘
         │
    ┌────▼──────┬────────────┬────────────┐
    │           │            │            │
┌───▼───┐  ┌───▼────┐  ┌───▼────┐  ┌───▼────┐
│Database│  │Matching│  │  AI    │  │ Config │
│ .py   │  │Engine  │  │Service │  │  .py   │
└───┬───┘  └───┬────┘  └───┬────┘  └────────┘
    │          │            │
    ▼          ▼            ▼
┌────────┐ ┌────────┐ ┌──────────┐
│SQLite  │ │演算法  │ │ Gemini   │
│  DB    │ │模型    │ │   API    │
└────────┘ └────────┘ └──────────┘
```

---

## 🔧 客製化指南

### 修改媒合權重

編輯 `matching_engine.py`:
```python
WEIGHTS = {
    'skill': 0.4,      # 技能匹配度
    'time': 0.2,       # 時間重疊度
    'rating': 0.2,     # 評價信任值
    'location': 0.2    # 地點相符度
}
```

### 新增任務分類

編輯 `config.py`:
```python
CATEGORIES = [
    "日常支援",
    "學習互助",
    "校園協助",
    "技能交換",
    "情境陪伴",
    "您的新分類"  # 在這裡加入
]
```

### 修改 UI 顏色

編輯 `app.py` 中的 CSS:
```python
st.markdown("""
<style>
    .main-header {
        color: #9333ea;  /* 修改這裡 */
    }
</style>
""", unsafe_allow_html=True)
```

---

**讓時間、技能與善意，在校園中流動起來** 💜

Made with ❤️ by Soochow Share Team

